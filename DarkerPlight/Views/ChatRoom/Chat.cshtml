@{
    Layout = "_BasicLayout";
}


<style>
    .contacts li:hover {
        background-color: rgba(0,0,0,0.3) !important;
    }

    .active {
        background-color: rgba(0,0,0,0.3);
    }
    #welcome {
        background-image: url(https://thumbs.dreamstime.com/b/washed-white-wood-texture-light-wooden-texture-background-washed-white-wood-texture-light-wooden-texture-background-woods-133034133.jpg) !important;
        background-repeat: no-repeat !important;
        background-size: cover !important;
    }
    .custom {
        font-family: 'Big Shoulders Stencil Display', cursive;
    }
    .custom2 {
        font-family: 'Bebas Neue', cursive;
    }
</style>

<div id="app" class="container-fluid h-200">
    <!--UserName-->
    <input type="text" id="username" hidden name="name" value="@ViewBag.Username" />

    <!--create dynamic titles-->
    <title v-if="titleChange != null">{{titleChange}}</title>
    <title v-else>Chat</title>
    <div v-if="errorMessage != ''" class="alert alert-info alert-dismissible fade show" style="margin-top:10px;" role="alert">
        <strong>Notice:</strong> {{errorMessage}}.
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="row p-5 pt-2">

        <div class="col-md-5 col-xl-4 chat">
            <div class="card mb-sm-3 mb-md-0 contacts_card">
                <div class="card-header">
                    <div class="input-group">
                        <input type="text" placeholder="Search..." name="" class="form-control search">
                        <div class="input-group-prepend">
                            <span class="input-group-text search_btn"><i class="fas fa-search"></i></span>
                        </div>
                    </div>
                </div>
                <div class="card-body contacts_body">
                    <p class="text-center text-white"> Welcome Anonymous <b> {{username}}</b></p>
                    <div v-if="contactList.length == 0">
                        <p class="text-info text-center"><small><i>Hello there is no friend available for chat wait a while...</i></small></p>
                    </div>
                    <ui class="contacts">
                        <li v-on:click="getConnectionString(contact.connection,contact.username)" v-bind:class="contact.class" v-for="contact in contactList" style="cursor:pointer" id="contactList">
                            <div id="group" class="d-flex bd-highlight">
                                <div class="img_cont">
                                    <img v-bind:src="contact.image" class="rounded-circle user_img">
                                    <span v-if="contact.online == true" class="online_icon online"></span>
                                    <span v-else class="online_icon offline"></span>
                                </div>
                                <div class="user_info">
                                    <span id="connectedUser">{{contact.username}}</span>
                                    <p>{{contact.lastLogin}}</p>
                                </div>
                            </div>
                        </li>
                    </ui>
                </div>
                <div class="card-footer"></div>
            </div>
        </div>

        <div class="col-md-8 col-xl-8 chat">
            <div class="card">
                <div class="card-header msg_head">
                    <div class="d-flex bd-highlight">
                        <div class="img_cont">
                            <img src="https://static.turbosquid.com/Preview/001292/481/WV/_D.jpg" class="rounded-circle user_img">
                            <span class="online_icon"></span>
                        </div>
                        <div class="user_info">
                            <span>{{chatHeaderMsg}} {{staticUsername}}</span>
                            <p>1767 Messages</p>
                        </div>
                        <div class="video_cam">
                            <span><i class="fas fa-video"></i></span>
                            <span><i class="fas fa-phone"></i></span>
                        </div>
                    </div>
                    <span id="action_menu_btn"><i class="fas fa-ellipsis-v"></i></span>
                    <div class="action_menu">
                        <ul>
                            <li><i class="fas fa-user-circle"></i> View profile</li>
                            <li><i class="fas fa-users"></i> Add to close friends</li>
                            <li><i class="fas fa-plus"></i> Add to group</li>
                            <li><i class="fas fa-ban"></i> Block</li>
                        </ul>
                    </div>
                </div>
                <div class="card-body msg_card_body" id="chatMessages">
                    <div v-if="messageCount == 0">
                        <h1 class="text-center text-info custom2"><b>NO MESSAGE AVAILABLE</b></h1>
                    </div>
                </div>
                <div v-if="staticUser == null" id="welcome" class="card-body msg_card_body">
                    <div class="text-center">
                        <i class="fa-5x fas fa-users text-info"></i>
                        <h2 style="color:#173b66" class="mt-3 custom"><b>WELCOME TO THE ANONYMOUS GROUP WHERE YOU CAN MEET AND CHAT WITH STRANGERS FROM ALL OVER THE WORLD. HAVE FUN...</b></h2>
                        <button style="background-color:white; border-radius:40px; color:#203e6b; box-shadow:9px 9px 9px 9px rgba(5, 5, 5, 0.26);" class="btn mt-5"><i class="fa-3x fas fa-plus"></i></button>
                    </div>
                </div>
                <div class="card-footer">
                    <div class="input-group">
                        <div class="input-group-append">
                            <span class="input-group-text attach_btn"><i class="fas fa-paperclip"></i></span>
                        </div>
                        <textarea id="message" name="" class="form-control type_msg" placeholder="Type your message..."></textarea>
                        <div class="input-group-append">
                            <span class="input-group-text send_btn" v-on:click="sendMessage"><i class="fas fa-location-arrow"></i></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="~/lib/microsoft/signalr/dist/browser/signalr.js"></script>
<script src="~/lib/jquery/dist/jquery.js"></script>
<script src="~/js/chatHub.js"></script>



